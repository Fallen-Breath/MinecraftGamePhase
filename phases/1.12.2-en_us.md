**English** | [中文](1.12.2-zh_cn.md)

# Game phase for Minecraft 1.12.2

Applicable versions: 1.12.x

## Phase Tree (Simplified)

```
Game Loop
├── Player Action
├── For each world
│   ├── Natural Spawning
│   ├── Chunk Unload
│   ├── World Time Update
│   ├── Tile Tick
│   ├── Chunk Tick
│   ├── Block Change Sync
│   ├── Block Event
│   ├── Entity
│   └── Tile Entity
├── Player Entity
└── Auto save
```

## Phase Tree (Full)

```
Game Loop
├── Async task
│   └── Player Action
├── For each world
│   ├── World Time Sync
│   ├── Weather
│   ├── Sleeping
│   ├── Natural Spawning
│   ├── Chunk Unload
│   ├── World Time Update
│   ├── Tile Tick
│   ├── Player Check Light
│   ├── Chunk Tick
│   │   ├── Light Logic
│   │   ├── Thunder
│   │   ├── Ice and Snow
│   │   └── Random Tick
│   ├── Player Chunk Map
│   │   └── Block Change Sync
│   ├── Village
│   ├── Zombie Siege Spawning
│   ├── Portal Cache
│   ├── Block Event
│   ├── Dragon Fight
│   ├── Entity
│   ├── Tile Entity
│   └── Entity Tracker
├── Network
│   └── Player Entity
├── Command Function
├── Console
└── Auto save
```

## Phase Details

### Game Loop

The main and the infinite loop

**Code References**

Minecraft 1.19, mojmap mapping

- Reference: `net.minecraft.server.MinecraftServer#runServer`

### Async task

Executing async tasks

**Code References**

Minecraft 1.19, mojmap mapping

- Reference: `net.minecraft.server.MinecraftServer#waitUntilNextTick`
- Caller: `net.minecraft.server.MinecraftServer#runServer`

### Player Action

Handling player actions from packets from clients

**Code References**

Minecraft 1.19, mojmap mapping

- Reference: `net.minecraft.network.protocol.PacketUtils#ensureRunningOnSameThread`

### For each world

For each world, do following logics

**Code References**

Minecraft 1.19, mojmap mapping

- Reference: `net.minecraft.server.MinecraftServer#tickChildren`

### World Time Sync

Sync world time to client

**Code References**

Minecraft 1.19, mojmap mapping

- Reference: `net.minecraft.network.protocol.game.ClientboundSetTimePacket`
- Caller: `net.minecraft.server.MinecraftServer#tickChildren`

### Weather

Update weather

**Code References**

Minecraft 1.19, mojmap mapping

- Reference: `net.minecraft.server.level.ServerLevel#advanceWeatherCycle`
- Caller: `net.minecraft.server.level.ServerLevel#tick`

### Sleeping

Player sleeping logic

**Code References**

Minecraft 1.19, mojmap mapping

- Reference: `net.minecraft.server.level.ServerLevel#wakeUpAllPlayers`
- Caller: `net.minecraft.server.level.ServerLevel#tick`

### Natural Spawning

Natural mob spawning

**Code References**

Minecraft 1.19, mojmap mapping

- Reference: `net.minecraft.world.level.NaturalSpawner#spawnForChunk`
- Caller: `net.minecraft.server.level.ServerChunkCache#tickChunks`

### Chunk Unload

Unloading chunks

**Code References**

Minecraft 1.19, mojmap mapping

- Reference: `net.minecraft.server.level.ChunkMap#tick(java.util.function.BooleanSupplier)`
- Caller: `net.minecraft.server.level.ServerChunkCache#tick`

### World Time Update

Update gametime and daytime of the world

**Code References**

Minecraft 1.19, mojmap mapping

- Reference: `net.minecraft.server.level.ServerLevel#tickTime`
- Caller: `net.minecraft.server.level.ServerLevel#tick`

### Tile Tick

Executing tile tick events, including block tile ticks and fluid tile ticks

**Code References**

Minecraft 1.19, mojmap mapping

- Reference: `net.minecraft.world.ticks.LevelTicks#tick`
- Caller: `net.minecraft.server.level.ServerLevel#tick`

### Player Check Light

Random light level check nearby players

**Code References**

Minecraft 1.13.2, mcp mapping

- Reference: `net.minecraft.world.WorldServer#playerCheckLight`
- Caller: `net.minecraft.world.WorldServer#tickBlocks`

### Chunk Tick

Chunk Tick

**Code References**

Minecraft 1.19, mojmap mapping

- Reference: `net.minecraft.server.level.ServerLevel#tickChunk`
- Caller: `net.minecraft.server.level.ServerChunkCache#tickChunks`

### Light Logic

Light check and skylight recalculation

**Code References**

Minecraft 1.13.2, mcp mapping

- Reference: `net.minecraft.world.chunk.Chunk#enqueueRelightChecks`
- Caller: `net.minecraft.world.WorldServer#tickBlocks`

### Thunder

Lighting and skeleton trap spawning

**Code References**

Minecraft 1.19, mojmap mapping

- Reference: `net.minecraft.server.level.ServerLevel#tickChunk`

### Ice and Snow

Forming ice and snow

**Code References**

Minecraft 1.19, mojmap mapping

- Reference: `net.minecraft.server.level.ServerLevel#tickChunk`

### Random Tick

Block and fluid random ticks

**Code References**

Minecraft 1.19, mojmap mapping

- Reference: `net.minecraft.server.level.ServerLevel#tickChunk`

### Player Chunk Map

Player chunk map update

**Code References**

Minecraft 1.13.2, mcp mapping

- Reference: `net.minecraft.server.management.PlayerChunkMap#tick`
- Caller: `net.minecraft.world.WorldServer#tick`

### Block Change Sync

Sync changed blocks in the chunk to the client

**Code References**

Minecraft 1.19, mojmap mapping

- Reference: `net.minecraft.server.level.ChunkHolder#broadcastChanges`
- Caller: `net.minecraft.server.level.ServerChunkCache#tickChunks`

### Village

Village logics

**Code References**

Minecraft 1.13.2, mcp mapping

- Reference: `net.minecraft.village.VillageCollection#tick`
- Caller: `net.minecraft.world.WorldServer#tick`

### Zombie Siege Spawning

Spawning zombie sieges

**Code References**

Minecraft 1.13.2, mcp mapping

- Reference: `net.minecraft.village.VillageSiege#tick`
- Caller: `net.minecraft.world.WorldServer#tick`

### Portal Cache

Timeout portal cache cleanup

**Code References**

Minecraft 1.13.2, mcp mapping

- Reference: `net.minecraft.world.Teleporter#tick`
- Caller: `net.minecraft.world.WorldServer#tick`

### Block Event

Block events

**Code References**

Minecraft 1.19, mojmap mapping

- Reference: `net.minecraft.server.level.ServerLevel#runBlockEvents`
- Caller: `net.minecraft.server.level.ServerLevel#tick`

### Dragon Fight

Dragon fight logic

**Code References**

Minecraft 1.19, mojmap mapping

- Reference: `net.minecraft.world.level.dimension.end.EndDragonFight#tick`
- Caller: `net.minecraft.server.level.ServerLevel#tick`

### Entity

Ticking entities

**Code References**

Minecraft 1.19, mojmap mapping

- Reference: `net.minecraft.world.level.Level#guardEntityTick`
- Caller: `net.minecraft.server.level.ServerLevel#tick`

### Tile Entity

Ticking tile entities

**Code References**

Minecraft 1.19, mojmap mapping

- Reference: `net.minecraft.world.level.Level#tickBlockEntities`
- Caller: `net.minecraft.server.level.ServerLevel#tick`

### Entity Tracker

Sync entity updates to the client

**Code References**

Minecraft 1.19, mojmap mapping

- Reference: `net.minecraft.server.level.ChunkMap#tick`
- Caller: `net.minecraft.server.level.ServerChunkCache#tickChunks`

### Network

Network system ticking

**Code References**

Minecraft 1.19, mojmap mapping

- Reference: `net.minecraft.server.network.ServerConnectionListener#tick`
- Caller: `net.minecraft.server.MinecraftServer#tickChildren`

### Player Entity

Ticking entity logic of players

**Code References**

Minecraft 1.19, mojmap mapping

- Reference: `net.minecraft.server.network.ServerGamePacketListenerImpl#tick`
- Caller: `net.minecraft.network.Connection#tick`

### Command Function

Executes functions and datapacks

**Code References**

Minecraft 1.19, mojmap mapping

- Reference: `net.minecraft.server.ServerFunctionManager#tick`
- Caller: `net.minecraft.server.MinecraftServer#tickChildren`

### Console

Handling console inputs

**Code References**

Minecraft 1.19, mojmap mapping

- Reference: `net.minecraft.server.dedicated.DedicatedServer#handleConsoleInputs`
- Caller: `net.minecraft.server.dedicated.DedicatedServer#tickChildren`

### Auto save

Auto save

**Code References**

Minecraft 1.19, mojmap mapping

- Reference: `net.minecraft.server.MinecraftServer#saveEverything`
- Caller: `net.minecraft.server.MinecraftServer#tickServer`

