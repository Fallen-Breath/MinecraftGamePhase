[English](1.19-en_us.md) | **中文**

# Minecraft 1.19 游戏阶段

适用版本: 1.19.x ~

## 游戏阶段树 (精简)

```
游戏循环
├── 对于每一个维度
│   ├── 更新世界时间
│   ├── 计划刻
│   ├── 对于每一个区块
│   │   ├── 自然刷怪
│   │   └── 区块刻
│   ├── 方块变化同步
│   ├── 区块卸载
│   ├── 方块事件
│   ├── 实体
│   └── 方块实体
├── 玩家实体
├── 自动保存
└── 玩家动作
```

## 游戏阶段树 (完整)

```
游戏循环
├── 函数及数据包
├── 对于每一个维度
│   ├── 同步世界时间
│   ├── 世界边界
│   ├── 天气
│   ├── 睡觉
│   ├── 更新世界时间
│   ├── 计划刻
│   ├── 袭击
│   ├── 加载票
│   ├── 对于每一个区块
│   │   ├── 自然刷怪
│   │   └── 区块刻
│   │       ├── 雷电
│   │       ├── 冰雪
│   │       └── 随机刻
│   ├── 特殊生成
│   │   ├── 幻翼生成
│   │   ├── 灾厄巡逻队生成
│   │   ├── 猫生成
│   │   ├── 僵尸攻城生成
│   │   └── 游商生成
│   ├── 方块变化同步
│   ├── 实体追踪器
│   ├── 区块卸载
│   ├── 方块事件
│   ├── 龙战
│   ├── 实体
│   ├── 方块实体
│   ├── 实体管理
│   └── 游戏事件
├── 网络
│   └── 玩家实体
├── 控制台
├── 自动保存
└── 异步事件
    └── 玩家动作
```

## 游戏阶段详情

### 游戏循环

无限执行的主循环

### 函数及数据包

函数与数据包的指令

### 对于每一个维度

对于每一个维度，执行以下的逻辑

### 同步世界时间

向客户端同步世界时间

### 世界边界

更新世界边界

### 天气

天气逻辑更新

### 睡觉

玩家睡觉逻辑

### 更新世界时间

更新世界的 gametime 以及 daytime

### 计划刻

执行计划刻事件，包括方块计划刻以及流体计划刻

### 袭击

袭击逻辑

### 加载票

加载票系统更新

### 对于每一个区块

对于每个附近有玩家的情况，执行以下的逻辑

### 自然刷怪

怪物自然生成

### 区块刻

区块刻

### 雷电

生成雷电以及骷髅马陷阱

### 冰雪

结冰、积雪

### 随机刻

方块以及流体随机刻

### 特殊生成

特殊的生物生成逻辑

### 幻翼生成

生成幻翼

### 灾厄巡逻队生成

随机生成灾厄巡逻队

### 猫生成

在村庄中生成猫

### 僵尸攻城生成

生成僵尸攻城

### 游商生成

生成游商

### 方块变化同步

向客户端同步区块中的方块变化

### 实体追踪器

向客户端同步实体状态更新

### 区块卸载

卸载区块

### 方块事件

执行方块事件

### 龙战

龙战逻辑

### 实体

运算实体

### 方块实体

运算方块实体

### 实体管理

加载/卸载那些因区块加载/卸载而增/删的实体

### 游戏事件

发出积攒的游戏事件

### 网络

网络连接运算

### 玩家实体

运算玩家的实体相关逻辑

### 控制台

处理控制台输入的指令

### 自动保存

自动保存

### 异步事件

执行异步计划的事件

### 玩家动作

处理来自客户端数据包的玩家动作

